<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{admin/index.html}">

<head> </head>

<body>
  <section layout:fragment="main">
    <main id="main" class="main">
      <div class="pagetitle">
        <h1>
          <span th:if="${product.isEdit}">Cập nhật</span>
          <span th:unless="${product.isEdit}">Tạo</span> sản phẩm
        </h1>
        <nav>
          <ol class="breadcrumb">
            <li class="breadcrumb-item">
              <a href="index.html">Trang chủ</a>
            </li>
            <li class="breadcrumb-item active">
              <a th:href="@{/admin/products}">
                <span>&nbsp; Sản phẩm</span>
              </a>
            </li>
          </ol>
        </nav>
      </div>
      <!-- End Page Title -->

      <section class="section">
        <div class="row">
          <div class="col-lg-12">
            <div class="card">
              <div class="card-body mt-4">
                <!-- Floating Labels Form -->
                <form method="POST" action="/admin/products/saveOrUpdate" th:object="${product}"
                  enctype="multipart/form-data">
                  <div class="row mb-2">
                    <!-- cột bên trái -->
                    <div class="col-md-6">
                      <div class="form-outline mb-3" data-mdb-input-init>
                        <input type="text" id="productName" name="name" class="form-control" required />
                        <label class="form-label" for="productName"><span class="text-danger">*</span> Tên sản
                          phẩm</label>
                      </div>
                      
                      <select name="category">
                        <option value="">--  Chọn Doanh Mục  --</option>
                        <th:block th:each="cat : ${categories}">
                          <option th:value="${cat.categoryId}">
                            <span th:text="${cat.name}">Tên: </span>
                            <span th:if="${cat.parentCategory != null}"> (Con của: <span
                                th:text="${cat.parentCategory.name}">Cha</span>)</span>
                          </option>
                        </th:block>
                      </select>


                      <div class="mb-3">
                        <label for="productDescription" class="form-label">Mô tả</label>
                        <textarea class="form-control" name="description" id="productDescription" rows="4"
                          required></textarea>
                      </div>

                      <label class="form-label"><span class="text-danger">*</span> Trạng thái</label>
                      <div class="form-check mb-3">
                        <input class="form-check-input" type="radio" name="status" id="statusActive" value="true"
                          required />
                        <label class="form-check-label" for="statusActive"> Hoạt động </label>
                      </div>
                      <div class="form-check mb-3">
                        <input class="form-check-input" type="radio" name="status" id="statusInactive" value="false" />
                        <label class="form-check-label" for="statusInactive"> Không hoạt động </label>
                      </div>
                    </div>
                    <!-- cột bên trái -->

                    <!-- cột bên phải -->
                    <div class="col-md-6">
                      <div class="form-group">
                        <label for="imageFile" class="form-label ms-4" style="cursor: pointer">Ảnh sản phẩm</label>
                        <input type="file" name="imageFile" id="imageFile" class="form-control d-none"
                          onchange="loadFile(event)" required />
                        <div class="avatar_wrapper d-flex align-items-center justify-content-center">
                          <img id="avatarImage" src="/admin/img/anhnentrang.jpg" alt="Chọn ảnh đại diện"
                            class="border border-dark border-1" style="
                                      width: 80%;
                                      height: auto;
                                      min-height: 440px;
                                      cursor: pointer;
                                      object-fit: cover;" />
                        </div>
                      </div>
                    </div>
                    <!-- cột bên phải -->
                  </div>
                  <div class="text-center mt-4">
                    <button type="submit" class="btn btn-primary me-3 py-2 px-4 rounded-pill">
                      Thêm Sản phẩm
                    </button>
                    <button type="reset" class="btn btn-secondary py-2 px-4 rounded-pill">
                      Làm mới
                    </button>
                  </div>
                </form>

                <!-- End floating Labels Form -->
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <script src="/admin/js/staff.js"></script>
    <script src="/admin/js/customer.js"></script>
  </section>
</body>

</html>